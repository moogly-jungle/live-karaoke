<!DOCTYPE html>
<html lang="fr">
<head>
  <!-- template public-list.html.j2 -->
  <meta charset="UTF-8">
  <title>Les chansons</title>
  <link rel="stylesheet" href="style.css">
  <style>
      body {
        font-family: 'Arial', sans-serif;
        margin: 0;
        padding: 0;
        background-color: #fff8f0;
        color: #333;
      }

      header {
        background-color: #fff;
        padding: 10px 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }

      header img {
        max-height: 60px;
        margin-right: 10px;
      }

      h1 {
        font-family: 'Comic Sans MS', cursive, sans-serif;
        font-size: 2.5em;
        margin: 0;
        color: #ff6600;
      }

      .intro {
        text-align: center;
        font-size: 1.2em;
        margin: 20px;
        line-height: 1.5;
      }

      .intro strong {
        color: #ff6600;
      }

      .search-container {
        text-align: center;
        margin: 20px 0;
      }

      .search-box {
        padding: 10px;
        font-size: 1em;
        width: 80%;
        max-width: 500px;
        border-radius: 8px;
        border: 1px solid #ccc;
      }

      ul.sans-puce {
        list-style: none;
        padding: 0 20px;
      }

      ul.sans-puce li a {
        color: #ff6600;
        text-decoration: none;
      }

      ul.sans-puce li a:hover {
        text-decoration: underline;
      }

      .social {
        text-align: center;
        margin: 20px 0;
      }

      .social img {
        width: 30px;
        vertical-align: middle;
        margin-left: 5px;
      }
    
      .search-container {
        position: relative;
        width: 90%;
        max-width: 600px;
        margin: 20px auto;
      }

      .search-box {
        width: 100%;
        padding: 12px 50px 12px 20px; /* espace pour le texte + l'icone */
        border-radius: 25px;
        border: 2px solid #FFA500; /* orange l√©ger */
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        font-size: 16px;
        outline: none;
        transition: 0.3s;
      }

      .search-box:focus {
        border-color: #FF8C00;
        box-shadow: 0 0 10px rgba(255,140,0,0.3);
      }

      .search-icon {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 20px;
        pointer-events: none; /* pour que l'icone ne bloque pas le clic dans le champ */
      }
    </style>
  </head>
<body>
  <header>
    <img src="resources/logo-karacoll.jpeg" alt="logo KaraColl">
    <h1>KaraColl</h1>
  </header>

  <div class="intro">
    <p>üé§ <strong>Le collectif Karaok√©</strong> :)<br>
    Ils jouent, <strong>vous chantez</strong> ! üé∂</p>

    <p>Retrouvez-nous chaque mois, le 2i√®me vendredi au 
    <strong><a href="https://www.chopeetcompagnie-bordeaux.fr">Chope et Compagnie</a>, Artigues-Pr√®s-Bordeaux</strong>.

    <p>Si vous ne trouvez pas votre bonheur ici, n'h√©sitez pas √† nous sugg√©rer une chanson que vous voudriez chanter ! Pour ce faire, rendez-vous <a href="https://forms.gle/nma55N8XSGRkphcC8">ici</a> üìù</p>

    <div class="social">
      Suivez-nous sur Instagram 
      <a href="https://www.instagram.com/karacoll33?igsh=cXlqcnRxNms3MmVt&utm_source=qr" target="_blank">
        <img src="resources/instagram-logo.jpeg" alt="Instagram">
      </a>
    </div>
  </div>

  <div class="search-container">
    <input id="search" class="search-box" type="search"
		   placeholder="Rechercher une chanson, un artiste, ... üé∂"
		   oninput="filterSongs()">
    <span class="search-icon">üîç</span>
  </div>

  <ul class="sans-puce song-list">  
    {%- for song in songs -%}         

<li><span class="song-number">{{ loop.index }}</span>.
<a href="{{lyrics_link_dir}}/{{ song.name.removesuffix('.txt')}}.html"><span class="title">{{song.header.title | escape}}</span></a>
- <span class="artist">{{song.header.artist | escape}}</span> 
{% if song.header.youtube is defined %}- <a href="{{song.header.youtube}}">YouTube</a> {% endif %}
{% if song.header.score is defined   %}- <a href="{{score_link_dir}}/{{song.header.score | escape}}">Partition</a> {% endif %}
{% if song.header.tabs is defined    %}- <a href="{{song.header.tabs | escape}}">Tabs</a>{% endif %}
</li>
     {% endfor %}
  </ul>

  <a href="index.html"
	 style="display:block; text-align:center; margin:30px;
			">Retour √† l'accueil</a>

  <script>
	const items = document.querySelectorAll('.song-list li');
	const search_selectors = ['.title', '.artist' , '.song-number']

  function filterSongs() {
    const query_string = document.getElementById('search').value.trim().toLowerCase();
    items.forEach(list_item => {
      // si le texte d'un des √©l√©ments titre, artiste etc contient la chaine recherch√©e...
      list_item.style.display = 
        search_selectors.some(selector => {
            const element = list_item.querySelector(selector);
            return element &&  element.textContent.toLowerCase().includes(query_string);
          }) ? "" : "none";  // visible ou unvisible
      });
    }
	
  </script>
</body>
</html>
